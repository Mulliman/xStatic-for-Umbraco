{"version":3,"file":"entrypoint-CadrE5P6.js","sources":["../../../Client/src/entrypoints/entrypoint.ts"],"sourcesContent":["import type {\r\n  UmbEntryPointOnInit,\r\n  UmbEntryPointOnUnload,\r\n} from \"@umbraco-cms/backoffice/extension-api\";\r\nimport { UMB_AUTH_CONTEXT } from \"@umbraco-cms/backoffice/auth\";\r\nimport { client } from \"../api/client.gen.js\";\r\n\r\nexport const onInit: UmbEntryPointOnInit = (_host, _extensionRegistry) => {\r\n  console.log(\"Time Dashboard extension loaded\");\r\n\r\n  _host.consumeContext(UMB_AUTH_CONTEXT, async (authContext) => {\r\n    if (!authContext) return;\r\n\r\n    const config = authContext.getOpenApiConfiguration();\r\n    if (config) {\r\n      client.setConfig({\r\n        baseUrl: config.base ?? '',\r\n        credentials: config.credentials ?? 'same-origin',\r\n      });\r\n\r\n      // Set up auth interceptor\r\n      client.interceptors.request.use(async (request) => {\r\n        const token = config.token;\r\n        if (token) {\r\n          const tokenValue = typeof token === 'function' ? await token() : token;\r\n          if (tokenValue) {\r\n            request.headers.set('Authorization', `Bearer ${tokenValue}`);\r\n          }\r\n        }\r\n        return request;\r\n      });\r\n    }\r\n  });\r\n};\r\n\r\nexport const onUnload: UmbEntryPointOnUnload = (_host, _extensionRegistry) => {\r\n  console.log(\"Time Dashboard extension unloaded\");\r\n};\r\n"],"names":["onInit","_host","_extensionRegistry","UMB_AUTH_CONTEXT","authContext","config","client","request","token","tokenValue","onUnload"],"mappings":";;AAOO,MAAMA,IAA8B,CAACC,GAAOC,MAAuB;AACxE,UAAQ,IAAI,iCAAiC,GAE7CD,EAAM,eAAeE,GAAkB,OAAOC,MAAgB;AAC5D,QAAI,CAACA,EAAa;AAElB,UAAMC,IAASD,EAAY,wBAAA;AAC3B,IAAIC,MACFC,EAAO,UAAU;AAAA,MACf,SAASD,EAAO,QAAQ;AAAA,MACxB,aAAaA,EAAO,eAAe;AAAA,IAAA,CACpC,GAGDC,EAAO,aAAa,QAAQ,IAAI,OAAOC,MAAY;AACjD,YAAMC,IAAQH,EAAO;AACrB,UAAIG,GAAO;AACT,cAAMC,IAAa,OAAOD,KAAU,aAAa,MAAMA,MAAUA;AACjE,QAAIC,KACFF,EAAQ,QAAQ,IAAI,iBAAiB,UAAUE,CAAU,EAAE;AAAA,MAE/D;AACA,aAAOF;AAAA,IACT,CAAC;AAAA,EAEL,CAAC;AACH,GAEaG,IAAkC,CAACT,GAAOC,MAAuB;AAC5E,UAAQ,IAAI,mCAAmC;AACjD;"}